
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.3">
    
    
      
        <title>Using filters - Cutevariant Doc</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.e35208c4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ef6f36e2.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#using-filters" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Cutevariant Doc" class="md-header__button md-logo" aria-label="Cutevariant Doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cutevariant Doc
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Using filters
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Cutevariant Doc" class="md-nav__button md-logo" aria-label="Cutevariant Doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Cutevariant Doc
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Welcome to the official Cutevariant documentation !
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Using filters
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Using filters
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#filtering-with-vql" class="md-nav__link">
    Filtering with VQL
  </a>
  
    <nav class="md-nav" aria-label="Filtering with VQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#string-operators" class="md-nav__link">
    String operators
  </a>
  
    <nav class="md-nav" aria-label="String operators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-regular-expressions" class="md-nav__link">
    Using regular expressions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-wordsets" class="md-nav__link">
    Using wordsets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-string-lists" class="md-nav__link">
    Using string lists
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#number-operators" class="md-nav__link">
    Number operators
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boolean-operators" class="md-nav__link">
    Boolean operators
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filtering-using-the-filters-editor-plugin" class="md-nav__link">
    Filtering using the Filters editor plugin
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../selections/" class="md-nav__link">
        Selections
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../wordset/" class="md-nav__link">
        Using wordsets
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#filtering-with-vql" class="md-nav__link">
    Filtering with VQL
  </a>
  
    <nav class="md-nav" aria-label="Filtering with VQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#string-operators" class="md-nav__link">
    String operators
  </a>
  
    <nav class="md-nav" aria-label="String operators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-regular-expressions" class="md-nav__link">
    Using regular expressions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-wordsets" class="md-nav__link">
    Using wordsets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-string-lists" class="md-nav__link">
    Using string lists
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#number-operators" class="md-nav__link">
    Number operators
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boolean-operators" class="md-nav__link">
    Boolean operators
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filtering-using-the-filters-editor-plugin" class="md-nav__link">
    Filtering using the Filters editor plugin
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="using-filters">Using filters</h1>
<p>Filters in cutevariant are a handy way of getting rid of variants you may not be interested in.</p>
<p>As with any other feature un cutevariant, there is always two ways to do it. Through VQL or using the Filters plugin.</p>
<h2 id="filtering-with-vql">Filtering with VQL</h2>
<p>To apply a filter on a VQL request, first add the <code>WHERE</code> keyword at the end of the query. For instance,</p>
<p><code>SELECT chr,pos,ref,alt FROM variants WHERE pos &gt;= 10000</code></p>
<p>will filter out every variant with position smaller than 10000.
The <code>WHERE</code> VQL statement supports two logical operators, <code>AND</code> and <code>OR</code>.</p>
<blockquote>
<ul>
<li>You can use as many parenthesis as needed to separate the statements.</li>
<li>Other operators that apply to the field depend on their type.</li>
</ul>
</blockquote>
<p>Currently, cutevariant supports 4 data types:
- Strings
- Integers
- Decimal numbers
- Booleans</p>
<h3 id="string-operators">String operators</h3>
<p>The simplest operators on strings are <code>=</code> and <code>!=</code>, respectively equality and inequality operators.
They apply on string fields, and there must be a perfect match between the field's value and the right hand side value.
However, most of the time you don't know the exact name of the gene you're looking for beforehand.
For instance, you may be looking for variants involving a whole gene family, or a known biological pathway. In this case, you need more data to match the field against, and therefore, more complex operators.</p>
<p>Luckily enough, there are three ways to address these types of issues.</p>
<h4 id="using-regular-expressions">Using regular expressions</h4>
<p>First, you can use regular expressions. In cutevariant, we use python regular expressions engine under the hood, so <a href="https://docs.python.org/3/library/re.html#regular-expression-syntax">here</a> is a great reference to get you started with this syntax.</p>
<h4 id="using-wordsets">Using wordsets</h4>
<p>You can also define wordsets. These can contain any arbitrary number of strings, and can be loaded from a file.</p>
<p>Usage example:
<code>SELECT chr,pos,ref,alt,ann.gene FROM variants WHERE ann.gene IN WORDSET['My wordset']</code></p>
<p>This will select every variant for which the gene annotation is in the wordset <code>My wordset</code>. Note the use of the <code>IN</code> operator, that can be negated with <code>NOT IN</code>.
To keep track of existing wordsets, create new ones, and modify them, there is a wordset plugin, which usage is described <a href="../wordset/">here</a>.</p>
<h4 id="using-string-lists">Using string lists</h4>
<p>Last but not least, you can use string lists. This is an intermediate solution between equality/inequality operators, where you specify the exact match, and the wordset operators where you can have very long list of strings to match against.</p>
<p>Let's say you have a few gene names that you want to look for, then this is the perfect use case for string list matching.
In VQL, this translates into :</p>
<p><code>SELECT chr,pos,ref,alt,ann.gene FROM variants WHERE ann.gene IN ('gene A','gene B','gene C')</code>
You can specify as many values as you want, as long as you quote the reference strings, separate values with commas, and put the whole test expression between parenthesis.</p>
<p>Note though, that if you have too many strings to test against one field, you may end up cluttering the VQL expression and make it hard to read.</p>
<p>If you need to make really complex operations, you can break them down by creating new <a href="../selections/">sources</a>, <em>a.k.a.</em> selections.</p>
<h3 id="number-operators">Number operators</h3>
<p>You can use any comparison operator on number, the only limitation is that you need to apply them one at the time.
For instance, the following VQL statement is not valid:</p>
<p><code>SELECT chr,pos,ref,alt FROM variants WHERE 1000 &lt; pos &lt; 3000</code></p>
<p>Instead, you need to use logical operators (such as <code>AND</code> and <code>OR</code>). So here is one possible fix for the above statement:</p>
<p><code>SELECT chr,pos,ref,alt FROM variants WHERE pos &gt; 1000 AND pos &lt; 3000</code></p>
<h3 id="boolean-operators">Boolean operators</h3>
<p>Some fields are booleans. As of 2021.05.08 release, you still need a comparison operator with them, such as <code>=</code>/<code>!=</code> and compare against True/False or 1/0.</p>
<p>For instance, this command is not valid:</p>
<p><code>SELECT chr,pos,ref,alt FROM variants WHERE favorite</code></p>
<p>Where this is one possible fix:</p>
<p><code>SELECT chr,pos,ref,alt FROM variants WHERE favorite=True</code></p>
<p>Allowed boolean values are:
- <code>True</code>, <code>true</code>, or <code>1</code>
- <code>False</code>, <code>false</code>, or <code>0</code></p>
<p>Please keep in mind that these are case sensitive, which means that TRUE won't evaluate to true, and so on.</p>
<h2 id="filtering-using-the-filters-editor-plugin">Filtering using the Filters editor plugin</h2>
<p>To make filtering easier if you don't want to type in complex VQL statements, we provided you with a tree-based filter editor.</p>
<p>First, if you don't see the filters editor plugin, this may be because it's hidden. To show it, toggle its visibility in the top toolbar, you can see it with the :material-filter: icon.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href=".." class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Welcome to the official Cutevariant documentation !
            </div>
          </div>
        </a>
      
      
        <a href="../selections/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Selections
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.fe42c31b.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.4ea5477f.min.js"></script>
      
    
  </body>
</html>